{"title":"案例-NLP实现预测天气冷暖感知度","slug":"案例-NLP实现预测天气冷暖感知度","date":"2019-03-01T15:30:00.000Z","updated":"2022-09-30T06:56:37.198Z","comments":true,"path":"api/articles/案例-NLP实现预测天气冷暖感知度.json","excerpt":null,"covers":["https://oceaneyes.top/img/zhishigroup.jpg","https://oceaneyes.top/img/alipay.jpg","https://oceaneyes.top/img/wechatpay.jpg"],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h1 id=\"案例nlp预测天气冷暖感知度\">案例：NLP预测天气冷暖感知度</h1>\n<h2 id=\"案例需求\">1、案例需求</h2>\n<blockquote>\n<p>根据吃冰淇淋和喝水的数量，判断成都天气冷热程度。</p>\n<p>成都春熙路街头采访记录一些游客吃了多少冰淇淋，又喝了几瓶水，他觉得成都天气怎么样（这里只考虑二分类问题，假设只有‘非常热’和‘一般热’）</p>\n<p>其中特征向量包括两个分别是冰激凌数t1和喝水数t2，户外活动时长t3:</p>\n<p>对应的标签类别分别是非常热A和一般热B。</p>\n</blockquote>\n<h2 id=\"实验数据准备\">2、实验数据准备</h2>\n<ul>\n<li>构造模拟数据</li>\n</ul>\n<table>\n<colgroup>\n<col style=\"width: 4%\">\n<col style=\"width: 6%\">\n<col style=\"width: 4%\">\n<col style=\"width: 13%\">\n<col style=\"width: 8%\">\n<col style=\"width: 62%\">\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>人员</th>\n<th>冰淇淋</th>\n<th>喝水</th>\n<th>户外活动时长</th>\n<th>冷热程度</th>\n<th>判断描述</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>小王</td>\n<td>8</td>\n<td>4</td>\n<td>2</td>\n<td>A</td>\n<td>小王吃了8个冰淇淋，喝了4瓶水，户外2小时，该地区天气非常热</td>\n</tr>\n<tr class=\"even\">\n<td>小张</td>\n<td>7</td>\n<td>1</td>\n<td>1</td>\n<td>A</td>\n<td>小张吃了7个冰淇淋，喝了1瓶水，户外1小时，该地区天气非常热</td>\n</tr>\n<tr class=\"odd\">\n<td>小李</td>\n<td>1</td>\n<td>4</td>\n<td>4</td>\n<td>B</td>\n<td>小李吃了1个冰淇淋，喝了4瓶水，户外4小时，该地区天气一般热</td>\n</tr>\n<tr class=\"even\">\n<td>小赵</td>\n<td>3</td>\n<td>0</td>\n<td>5</td>\n<td>B</td>\n<td>小赵吃了3个冰淇淋，喝了0瓶水，户外5小时，该地区天气一般热</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><p>代码构造数据集</p>\n<div class=\"sourceCode\" id=\"cb1\"><pre class=\"sourceCode python\"><code class=\"sourceCode python\"><span id=\"cb1-1\"><a href=\"#cb1-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\">#!/usr/bin/python</span></span>\n<span id=\"cb1-2\"><a href=\"#cb1-2\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\"># -*- coding:utf-8 -*-</span></span>\n<span id=\"cb1-3\"><a href=\"#cb1-3\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\">&#39;&#39;&#39;</span></span>\n<span id=\"cb1-4\"><a href=\"#cb1-4\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\">    author:gzy</span></span>\n<span id=\"cb1-5\"><a href=\"#cb1-5\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\">    date:20190301</span></span>\n<span id=\"cb1-6\"><a href=\"#cb1-6\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\">    version:0.1.0</span></span>\n<span id=\"cb1-7\"><a href=\"#cb1-7\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\">&#39;&#39;&#39;</span></span>\n<span id=\"cb1-8\"><a href=\"#cb1-8\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"im\">import</span> numpy <span class=\"im\">as</span> np</span>\n<span id=\"cb1-9\"><a href=\"#cb1-9\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"im\">import</span> matplotlib.pyplot <span class=\"im\">as</span> plt</span>\n<span id=\"cb1-10\"><a href=\"#cb1-10\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"im\">from</span> matplotlib.font_manager <span class=\"im\">import</span> FontProperties</span>\n<span id=\"cb1-11\"><a href=\"#cb1-11\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"kw\">class</span> Temperature():</span>\n<span id=\"cb1-12\"><a href=\"#cb1-12\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"co\">#设置字字体，避免汉字乱码</span></span>\n<span id=\"cb1-13\"><a href=\"#cb1-13\" aria-hidden=\"true\" tabindex=\"-1\"></a>    siyuanyahei <span class=\"op\">=</span> FontProperties(fname<span class=\"op\">=</span><span class=\"st\">&quot;../SourceHanSans-Normal.otf&quot;</span>)</span>\n<span id=\"cb1-14\"><a href=\"#cb1-14\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb1-15\"><a href=\"#cb1-15\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"co\">#创建数据集，返回数据集和类标签</span></span>\n<span id=\"cb1-16\"><a href=\"#cb1-16\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"kw\">def</span> create_dataset(<span class=\"va\">self</span>):</span>\n<span id=\"cb1-17\"><a href=\"#cb1-17\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 数据集</span></span>\n<span id=\"cb1-18\"><a href=\"#cb1-18\" aria-hidden=\"true\" tabindex=\"-1\"></a>        datasets <span class=\"op\">=</span> np.array([[<span class=\"dv\">8</span>,<span class=\"dv\">4</span>,<span class=\"dv\">2</span>],[<span class=\"dv\">7</span>,<span class=\"dv\">1</span>,<span class=\"dv\">1</span>],[<span class=\"dv\">1</span>,<span class=\"dv\">4</span>,<span class=\"dv\">4</span>],[<span class=\"dv\">3</span>,<span class=\"dv\">0</span>,<span class=\"dv\">5</span>]])</span>\n<span id=\"cb1-19\"><a href=\"#cb1-19\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\">#类标签</span></span>\n<span id=\"cb1-20\"><a href=\"#cb1-20\" aria-hidden=\"true\" tabindex=\"-1\"></a>        labels <span class=\"op\">=</span> [<span class=\"st\">&#39;非常热&#39;</span>,<span class=\"st\">&#39;非常热&#39;</span>,<span class=\"st\">&#39;一般热&#39;</span>,<span class=\"st\">&#39;一般热&#39;</span>]</span>\n<span id=\"cb1-21\"><a href=\"#cb1-21\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"cf\">return</span> datasets,labels</span></code></pre></div></li>\n</ul>\n<h2 id=\"数据分析与可视化\">3、数据分析与可视化</h2>\n<ul>\n<li><p>可视化展示散点图</p>\n<div class=\"sourceCode\" id=\"cb2\"><pre class=\"sourceCode python\"><code class=\"sourceCode python\"><span id=\"cb2-1\"><a href=\"#cb2-1\" aria-hidden=\"true\" tabindex=\"-1\"></a> <span class=\"co\">#可视化分析数据</span></span>\n<span id=\"cb2-2\"><a href=\"#cb2-2\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"kw\">def</span> analyze_data_plot(<span class=\"va\">self</span>,x,y):</span>\n<span id=\"cb2-3\"><a href=\"#cb2-3\" aria-hidden=\"true\" tabindex=\"-1\"></a>        fig <span class=\"op\">=</span> plt.figure()</span>\n<span id=\"cb2-4\"><a href=\"#cb2-4\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 将画布分隔为1行1列一块</span></span>\n<span id=\"cb2-5\"><a href=\"#cb2-5\" aria-hidden=\"true\" tabindex=\"-1\"></a>        ax <span class=\"op\">=</span> fig.add_subplot(<span class=\"dv\">111</span>)</span>\n<span id=\"cb2-6\"><a href=\"#cb2-6\" aria-hidden=\"true\" tabindex=\"-1\"></a>        ax.scatter(x,y)</span>\n<span id=\"cb2-7\"><a href=\"#cb2-7\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb2-8\"><a href=\"#cb2-8\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\">#设置散点图的标题和横纵坐标</span></span>\n<span id=\"cb2-9\"><a href=\"#cb2-9\" aria-hidden=\"true\" tabindex=\"-1\"></a>        plt.title(<span class=\"st\">&#39;游客领热感知散点图&#39;</span>,fontproperties<span class=\"op\">=</span><span class=\"va\">self</span>.siyuanyahei)</span>\n<span id=\"cb2-10\"><a href=\"#cb2-10\" aria-hidden=\"true\" tabindex=\"-1\"></a>        plt.xlabel(<span class=\"st\">&#39;天热吃冰激凌数目&#39;</span>,fontproperties<span class=\"op\">=</span><span class=\"va\">self</span>.siyuanyahei)</span>\n<span id=\"cb2-11\"><a href=\"#cb2-11\" aria-hidden=\"true\" tabindex=\"-1\"></a>        plt.ylabel(<span class=\"st\">&#39;天热喝水的数目&#39;</span>,fontproperties<span class=\"op\">=</span><span class=\"va\">self</span>.siyuanyahei)</span>\n<span id=\"cb2-12\"><a href=\"#cb2-12\" aria-hidden=\"true\" tabindex=\"-1\"></a>        plt.show()</span></code></pre></div></li>\n</ul>\n<h2 id=\"算法模型及原理讲解\">4、算法模型及原理讲解</h2>\n<ul>\n<li>KNN模型原理及欧式距离计算\n<ul>\n<li>什么是KNN算法模型</li>\n<li>KNN工作原理</li>\n<li>KNN算法思想</li>\n<li>KNN算法流程</li>\n</ul></li>\n</ul>\n<h3 id=\"knn算法模型\">4.1、KNN算法模型</h3>\n<p>​\nk-近邻(KNN，k-NearestNeighbor)算法是一种基本分类与回归方法。<em>k-近邻假设设定一个训练数据集(先验知识)，其中的实例类别已定。分类时候，对新的实例数据，根据其K个最近邻的训练实例的类别，通过多数表决等方式进行预测。</em></p>\n<p>==K近邻算法属于有监督学习，实际上利用训练数据集对特征向量空间进行划分，并作为其分类的\"模型\"。K值的选择、距离度量、以及分类决策规则是K近邻算法的三个基本要素。==</p>\n<p>在本案例中，仅讨论分类问题中的k-近邻算法；<strong>输入值：</strong>案例的特征向量(吃冰淇淋、喝水、活动时间)，对应特征空间的点；<strong>输出值：</strong>案例的类别(非常热、一般热、舒适、一般冷、非常冷)</p>\n<h3 id=\"knn工作原理\">4.2、KNN工作原理</h3>\n<ul>\n<li>假设一个带有标签的数据集(训练样本集)，包含每条数据与所属分类的对应关系</li>\n<li>输入没有标签的新数据后，将新数据的每个特征与样本集中数据对应的特征进行比较</li>\n<li>计算新数据与样本数据集 中每条数据的距离</li>\n<li>对求得的所有距离进行排序(从小到大，越小表示越相似)</li>\n<li>取前K(K&lt;=20的奇数)个样本数据对应的分类标签</li>\n<li>求K个数据中出现次数最多的分类标签作为新数据的分类</li>\n</ul>\n<h3 id=\"knn算法思想\">4.3、KNN算法思想</h3>\n<ul>\n<li>计算所有样本点 与 待分类样本之间的距离</li>\n<li>计算完 样本距离进行排序</li>\n<li>选取距离样本最近的k个点</li>\n<li>针对这个k个点，统计各个类别分别有多少个</li>\n<li>k个点钟某个类别最多，就将该样本划归该点</li>\n</ul>\n<h3 id=\"knn算法模型流程与实现\">4.4、KNN算法模型流程与实现</h3>\n<ul>\n<li>搜集数据\n<ul>\n<li>数据采集过程，分为：非机构化数据、半结构化数据、数据化数据</li>\n</ul></li>\n<li>准备数据\n<ul>\n<li>格式化处理，对不同类别的数据进行统一的格式化处理</li>\n<li>如：将pdf,word,excel,sql等统一转化为txt</li>\n</ul></li>\n<li>分析数据\n<ul>\n<li>看数据特点，有无缺失值，数据是离散还是连续</li>\n</ul></li>\n<li>训练数据\n<ul>\n<li>不适用与KNN，但在其他一些监督学习中经常会用到</li>\n</ul></li>\n<li>应用算法\n<ul>\n<li>针对完善的模型进行封装重构，进行实际应用</li>\n</ul></li>\n</ul>\n<p>构造KNN分类器</p>\n<div class=\"sourceCode\" id=\"cb3\"><pre class=\"sourceCode python\"><code class=\"sourceCode python\"><span id=\"cb3-1\"><a href=\"#cb3-1\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"co\">#构造KNN分类器</span></span>\n<span id=\"cb3-2\"><a href=\"#cb3-2\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"kw\">def</span> knn_Classifier(<span class=\"va\">self</span>,newV,datasets,labels,k):</span>\n<span id=\"cb3-3\"><a href=\"#cb3-3\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 获取新样本的数据</span></span>\n<span id=\"cb3-4\"><a href=\"#cb3-4\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 获取样本库的数据</span></span>\n<span id=\"cb3-5\"><a href=\"#cb3-5\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 选择K值</span></span>\n<span id=\"cb3-6\"><a href=\"#cb3-6\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 计算样本数据与样本库数据之间的距离</span></span>\n<span id=\"cb3-7\"><a href=\"#cb3-7\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 根据距离进行排序</span></span>\n<span id=\"cb3-8\"><a href=\"#cb3-8\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 针对k个点，统计各个类别的数量</span></span>\n<span id=\"cb3-9\"><a href=\"#cb3-9\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 投票机制，少数服从多数原则</span></span>\n<span id=\"cb3-10\"><a href=\"#cb3-10\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb3-11\"><a href=\"#cb3-11\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"cf\">pass</span></span></code></pre></div>\n<p>欧式距离计算</p>\n<div class=\"sourceCode\" id=\"cb4\"><pre class=\"sourceCode python\"><code class=\"sourceCode python\"><span id=\"cb4-1\"><a href=\"#cb4-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\"># 欧氏距离计算</span></span>\n<span id=\"cb4-2\"><a href=\"#cb4-2\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"co\">#方式一 d^2 = （x1-x2）^2 +(y1-y2)^2&quot;</span></span>\n<span id=\"cb4-3\"><a href=\"#cb4-3\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"kw\">def</span> ComputeEuclideanDistance(<span class=\"va\">self</span>,x1,x2,y1,y2):</span>\n<span id=\"cb4-4\"><a href=\"#cb4-4\" aria-hidden=\"true\" tabindex=\"-1\"></a>        d <span class=\"op\">=</span> math.sqrt(math.<span class=\"bu\">pow</span>((x1<span class=\"op\">-</span>x2),<span class=\"dv\">2</span>)<span class=\"op\">+</span>math.<span class=\"bu\">pow</span>((y1<span class=\"op\">-</span>y2),<span class=\"dv\">2</span>))</span>\n<span id=\"cb4-5\"><a href=\"#cb4-5\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"cf\">return</span> d</span>\n<span id=\"cb4-6\"><a href=\"#cb4-6\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb4-7\"><a href=\"#cb4-7\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"co\"># 方式二</span></span>\n<span id=\"cb4-8\"><a href=\"#cb4-8\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"kw\">def</span> EuclideanDistance(<span class=\"va\">self</span>,instance1,instance2,length):</span>\n<span id=\"cb4-9\"><a href=\"#cb4-9\" aria-hidden=\"true\" tabindex=\"-1\"></a>        d <span class=\"op\">=</span><span class=\"dv\">0</span></span>\n<span id=\"cb4-10\"><a href=\"#cb4-10\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"cf\">for</span> x <span class=\"kw\">in</span> <span class=\"bu\">range</span>(length):</span>\n<span id=\"cb4-11\"><a href=\"#cb4-11\" aria-hidden=\"true\" tabindex=\"-1\"></a>            d <span class=\"op\">+=</span> <span class=\"bu\">pow</span>((instance1[x]<span class=\"op\">-</span>instance2[x]),<span class=\"dv\">2</span>)</span>\n<span id=\"cb4-12\"><a href=\"#cb4-12\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"cf\">return</span> math.sqrt(d)</span></code></pre></div>\n<hr>\n<h3 id=\"about-me\">About ME</h3>\n<h5 id=\"读书城南-在未来面前我们都是孩子\">👋 读书城南，🤔\n在未来面前，我们都是孩子～</h5>\n<ul>\n<li>📙\n一个热衷于探索学习新方向、新事物的智能产品经理，闲暇时间喜欢coding💻、画图🎨、音乐🎵、学习ing~</li>\n</ul>\n<h5 id=\"social-media\">👋 Social Media</h5>\n<ul>\n<li><p>🛠️ Blog: <a href=\"http://oceaneyes.top\">http://oceaneyes.top</a></p></li>\n<li><p>⚡ PM导航: <a href=\"https://pmhub.oceangzy.top\">https://pmhub.oceangzy.top</a></p></li>\n<li><p>☘️ CNBLOG: <a href=\"https://www.cnblogs.com/oceaneyes-gzy/\">https://www.cnblogs.com/oceaneyes-gzy/</a></p></li>\n<li><p>🌱 AI PRJ自己部署的一些算法demo: <a href=\"http://ai.oceangzy.top/\">http://ai.oceangzy.top/</a></p></li>\n<li><p>📫 Email: 1450136519@qq.com</p></li>\n<li><p>💬 WeChat: <a href=\"https://oceaneyes.top/img/wechatqrcode.jpg\">OCEANGZY</a></p></li>\n<li><p>💬 公众号: <a href=\"https://oceaneyes.top/img/wechatgzh.jpeg\">UncleJoker-GZY</a></p></li>\n</ul>\n<h5 id=\"加入小组\">👋 加入小组~</h5>\n<p><img src=\"https://oceaneyes.top/img/zhishigroup.jpg\" title=\"加入组织\" alt width=\"240\"></p>\n<h5 id=\"感谢打赏\">👋 感谢打赏~</h5>\n<p><img src=\"https://oceaneyes.top/img/alipay.jpg\" title=\"支付宝打赏\" alt width=\"140\">\n<img src=\"https://oceaneyes.top/img/wechatpay.jpg\" title=\"微信打赏\" alt width=\"140\"></p>\n","more":"<h1 id=\"案例nlp预测天气冷暖感知度\">案例：NLP预测天气冷暖感知度</h1>\n<h2 id=\"案例需求\">1、案例需求</h2>\n<blockquote>\n<p>根据吃冰淇淋和喝水的数量，判断成都天气冷热程度。</p>\n<p>成都春熙路街头采访记录一些游客吃了多少冰淇淋，又喝了几瓶水，他觉得成都天气怎么样（这里只考虑二分类问题，假设只有‘非常热’和‘一般热’）</p>\n<p>其中特征向量包括两个分别是冰激凌数t1和喝水数t2，户外活动时长t3:</p>\n<p>对应的标签类别分别是非常热A和一般热B。</p>\n</blockquote>\n<h2 id=\"实验数据准备\">2、实验数据准备</h2>\n<ul>\n<li>构造模拟数据</li>\n</ul>\n<table>\n<colgroup>\n<col style=\"width: 4%\">\n<col style=\"width: 6%\">\n<col style=\"width: 4%\">\n<col style=\"width: 13%\">\n<col style=\"width: 8%\">\n<col style=\"width: 62%\">\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>人员</th>\n<th>冰淇淋</th>\n<th>喝水</th>\n<th>户外活动时长</th>\n<th>冷热程度</th>\n<th>判断描述</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>小王</td>\n<td>8</td>\n<td>4</td>\n<td>2</td>\n<td>A</td>\n<td>小王吃了8个冰淇淋，喝了4瓶水，户外2小时，该地区天气非常热</td>\n</tr>\n<tr class=\"even\">\n<td>小张</td>\n<td>7</td>\n<td>1</td>\n<td>1</td>\n<td>A</td>\n<td>小张吃了7个冰淇淋，喝了1瓶水，户外1小时，该地区天气非常热</td>\n</tr>\n<tr class=\"odd\">\n<td>小李</td>\n<td>1</td>\n<td>4</td>\n<td>4</td>\n<td>B</td>\n<td>小李吃了1个冰淇淋，喝了4瓶水，户外4小时，该地区天气一般热</td>\n</tr>\n<tr class=\"even\">\n<td>小赵</td>\n<td>3</td>\n<td>0</td>\n<td>5</td>\n<td>B</td>\n<td>小赵吃了3个冰淇淋，喝了0瓶水，户外5小时，该地区天气一般热</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><p>代码构造数据集</p>\n<div class=\"sourceCode\" id=\"cb1\"><pre class=\"sourceCode python\"><code class=\"sourceCode python\"><span id=\"cb1-1\"><a href=\"#cb1-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\">#!/usr/bin/python</span></span>\n<span id=\"cb1-2\"><a href=\"#cb1-2\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\"># -*- coding:utf-8 -*-</span></span>\n<span id=\"cb1-3\"><a href=\"#cb1-3\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\">&#39;&#39;&#39;</span></span>\n<span id=\"cb1-4\"><a href=\"#cb1-4\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\">    author:gzy</span></span>\n<span id=\"cb1-5\"><a href=\"#cb1-5\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\">    date:20190301</span></span>\n<span id=\"cb1-6\"><a href=\"#cb1-6\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\">    version:0.1.0</span></span>\n<span id=\"cb1-7\"><a href=\"#cb1-7\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\">&#39;&#39;&#39;</span></span>\n<span id=\"cb1-8\"><a href=\"#cb1-8\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"im\">import</span> numpy <span class=\"im\">as</span> np</span>\n<span id=\"cb1-9\"><a href=\"#cb1-9\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"im\">import</span> matplotlib.pyplot <span class=\"im\">as</span> plt</span>\n<span id=\"cb1-10\"><a href=\"#cb1-10\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"im\">from</span> matplotlib.font_manager <span class=\"im\">import</span> FontProperties</span>\n<span id=\"cb1-11\"><a href=\"#cb1-11\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"kw\">class</span> Temperature():</span>\n<span id=\"cb1-12\"><a href=\"#cb1-12\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"co\">#设置字字体，避免汉字乱码</span></span>\n<span id=\"cb1-13\"><a href=\"#cb1-13\" aria-hidden=\"true\" tabindex=\"-1\"></a>    siyuanyahei <span class=\"op\">=</span> FontProperties(fname<span class=\"op\">=</span><span class=\"st\">&quot;../SourceHanSans-Normal.otf&quot;</span>)</span>\n<span id=\"cb1-14\"><a href=\"#cb1-14\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb1-15\"><a href=\"#cb1-15\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"co\">#创建数据集，返回数据集和类标签</span></span>\n<span id=\"cb1-16\"><a href=\"#cb1-16\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"kw\">def</span> create_dataset(<span class=\"va\">self</span>):</span>\n<span id=\"cb1-17\"><a href=\"#cb1-17\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 数据集</span></span>\n<span id=\"cb1-18\"><a href=\"#cb1-18\" aria-hidden=\"true\" tabindex=\"-1\"></a>        datasets <span class=\"op\">=</span> np.array([[<span class=\"dv\">8</span>,<span class=\"dv\">4</span>,<span class=\"dv\">2</span>],[<span class=\"dv\">7</span>,<span class=\"dv\">1</span>,<span class=\"dv\">1</span>],[<span class=\"dv\">1</span>,<span class=\"dv\">4</span>,<span class=\"dv\">4</span>],[<span class=\"dv\">3</span>,<span class=\"dv\">0</span>,<span class=\"dv\">5</span>]])</span>\n<span id=\"cb1-19\"><a href=\"#cb1-19\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\">#类标签</span></span>\n<span id=\"cb1-20\"><a href=\"#cb1-20\" aria-hidden=\"true\" tabindex=\"-1\"></a>        labels <span class=\"op\">=</span> [<span class=\"st\">&#39;非常热&#39;</span>,<span class=\"st\">&#39;非常热&#39;</span>,<span class=\"st\">&#39;一般热&#39;</span>,<span class=\"st\">&#39;一般热&#39;</span>]</span>\n<span id=\"cb1-21\"><a href=\"#cb1-21\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"cf\">return</span> datasets,labels</span></code></pre></div></li>\n</ul>\n<h2 id=\"数据分析与可视化\">3、数据分析与可视化</h2>\n<ul>\n<li><p>可视化展示散点图</p>\n<div class=\"sourceCode\" id=\"cb2\"><pre class=\"sourceCode python\"><code class=\"sourceCode python\"><span id=\"cb2-1\"><a href=\"#cb2-1\" aria-hidden=\"true\" tabindex=\"-1\"></a> <span class=\"co\">#可视化分析数据</span></span>\n<span id=\"cb2-2\"><a href=\"#cb2-2\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"kw\">def</span> analyze_data_plot(<span class=\"va\">self</span>,x,y):</span>\n<span id=\"cb2-3\"><a href=\"#cb2-3\" aria-hidden=\"true\" tabindex=\"-1\"></a>        fig <span class=\"op\">=</span> plt.figure()</span>\n<span id=\"cb2-4\"><a href=\"#cb2-4\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 将画布分隔为1行1列一块</span></span>\n<span id=\"cb2-5\"><a href=\"#cb2-5\" aria-hidden=\"true\" tabindex=\"-1\"></a>        ax <span class=\"op\">=</span> fig.add_subplot(<span class=\"dv\">111</span>)</span>\n<span id=\"cb2-6\"><a href=\"#cb2-6\" aria-hidden=\"true\" tabindex=\"-1\"></a>        ax.scatter(x,y)</span>\n<span id=\"cb2-7\"><a href=\"#cb2-7\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb2-8\"><a href=\"#cb2-8\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\">#设置散点图的标题和横纵坐标</span></span>\n<span id=\"cb2-9\"><a href=\"#cb2-9\" aria-hidden=\"true\" tabindex=\"-1\"></a>        plt.title(<span class=\"st\">&#39;游客领热感知散点图&#39;</span>,fontproperties<span class=\"op\">=</span><span class=\"va\">self</span>.siyuanyahei)</span>\n<span id=\"cb2-10\"><a href=\"#cb2-10\" aria-hidden=\"true\" tabindex=\"-1\"></a>        plt.xlabel(<span class=\"st\">&#39;天热吃冰激凌数目&#39;</span>,fontproperties<span class=\"op\">=</span><span class=\"va\">self</span>.siyuanyahei)</span>\n<span id=\"cb2-11\"><a href=\"#cb2-11\" aria-hidden=\"true\" tabindex=\"-1\"></a>        plt.ylabel(<span class=\"st\">&#39;天热喝水的数目&#39;</span>,fontproperties<span class=\"op\">=</span><span class=\"va\">self</span>.siyuanyahei)</span>\n<span id=\"cb2-12\"><a href=\"#cb2-12\" aria-hidden=\"true\" tabindex=\"-1\"></a>        plt.show()</span></code></pre></div></li>\n</ul>\n<h2 id=\"算法模型及原理讲解\">4、算法模型及原理讲解</h2>\n<ul>\n<li>KNN模型原理及欧式距离计算\n<ul>\n<li>什么是KNN算法模型</li>\n<li>KNN工作原理</li>\n<li>KNN算法思想</li>\n<li>KNN算法流程</li>\n</ul></li>\n</ul>\n<h3 id=\"knn算法模型\">4.1、KNN算法模型</h3>\n<p>​\nk-近邻(KNN，k-NearestNeighbor)算法是一种基本分类与回归方法。<em>k-近邻假设设定一个训练数据集(先验知识)，其中的实例类别已定。分类时候，对新的实例数据，根据其K个最近邻的训练实例的类别，通过多数表决等方式进行预测。</em></p>\n<p>==K近邻算法属于有监督学习，实际上利用训练数据集对特征向量空间进行划分，并作为其分类的\"模型\"。K值的选择、距离度量、以及分类决策规则是K近邻算法的三个基本要素。==</p>\n<p>在本案例中，仅讨论分类问题中的k-近邻算法；<strong>输入值：</strong>案例的特征向量(吃冰淇淋、喝水、活动时间)，对应特征空间的点；<strong>输出值：</strong>案例的类别(非常热、一般热、舒适、一般冷、非常冷)</p>\n<h3 id=\"knn工作原理\">4.2、KNN工作原理</h3>\n<ul>\n<li>假设一个带有标签的数据集(训练样本集)，包含每条数据与所属分类的对应关系</li>\n<li>输入没有标签的新数据后，将新数据的每个特征与样本集中数据对应的特征进行比较</li>\n<li>计算新数据与样本数据集 中每条数据的距离</li>\n<li>对求得的所有距离进行排序(从小到大，越小表示越相似)</li>\n<li>取前K(K&lt;=20的奇数)个样本数据对应的分类标签</li>\n<li>求K个数据中出现次数最多的分类标签作为新数据的分类</li>\n</ul>\n<h3 id=\"knn算法思想\">4.3、KNN算法思想</h3>\n<ul>\n<li>计算所有样本点 与 待分类样本之间的距离</li>\n<li>计算完 样本距离进行排序</li>\n<li>选取距离样本最近的k个点</li>\n<li>针对这个k个点，统计各个类别分别有多少个</li>\n<li>k个点钟某个类别最多，就将该样本划归该点</li>\n</ul>\n<h3 id=\"knn算法模型流程与实现\">4.4、KNN算法模型流程与实现</h3>\n<ul>\n<li>搜集数据\n<ul>\n<li>数据采集过程，分为：非机构化数据、半结构化数据、数据化数据</li>\n</ul></li>\n<li>准备数据\n<ul>\n<li>格式化处理，对不同类别的数据进行统一的格式化处理</li>\n<li>如：将pdf,word,excel,sql等统一转化为txt</li>\n</ul></li>\n<li>分析数据\n<ul>\n<li>看数据特点，有无缺失值，数据是离散还是连续</li>\n</ul></li>\n<li>训练数据\n<ul>\n<li>不适用与KNN，但在其他一些监督学习中经常会用到</li>\n</ul></li>\n<li>应用算法\n<ul>\n<li>针对完善的模型进行封装重构，进行实际应用</li>\n</ul></li>\n</ul>\n<p>构造KNN分类器</p>\n<div class=\"sourceCode\" id=\"cb3\"><pre class=\"sourceCode python\"><code class=\"sourceCode python\"><span id=\"cb3-1\"><a href=\"#cb3-1\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"co\">#构造KNN分类器</span></span>\n<span id=\"cb3-2\"><a href=\"#cb3-2\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"kw\">def</span> knn_Classifier(<span class=\"va\">self</span>,newV,datasets,labels,k):</span>\n<span id=\"cb3-3\"><a href=\"#cb3-3\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 获取新样本的数据</span></span>\n<span id=\"cb3-4\"><a href=\"#cb3-4\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 获取样本库的数据</span></span>\n<span id=\"cb3-5\"><a href=\"#cb3-5\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 选择K值</span></span>\n<span id=\"cb3-6\"><a href=\"#cb3-6\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 计算样本数据与样本库数据之间的距离</span></span>\n<span id=\"cb3-7\"><a href=\"#cb3-7\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 根据距离进行排序</span></span>\n<span id=\"cb3-8\"><a href=\"#cb3-8\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 针对k个点，统计各个类别的数量</span></span>\n<span id=\"cb3-9\"><a href=\"#cb3-9\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"co\"># 投票机制，少数服从多数原则</span></span>\n<span id=\"cb3-10\"><a href=\"#cb3-10\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb3-11\"><a href=\"#cb3-11\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"cf\">pass</span></span></code></pre></div>\n<p>欧式距离计算</p>\n<div class=\"sourceCode\" id=\"cb4\"><pre class=\"sourceCode python\"><code class=\"sourceCode python\"><span id=\"cb4-1\"><a href=\"#cb4-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"co\"># 欧氏距离计算</span></span>\n<span id=\"cb4-2\"><a href=\"#cb4-2\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"co\">#方式一 d^2 = （x1-x2）^2 +(y1-y2)^2&quot;</span></span>\n<span id=\"cb4-3\"><a href=\"#cb4-3\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"kw\">def</span> ComputeEuclideanDistance(<span class=\"va\">self</span>,x1,x2,y1,y2):</span>\n<span id=\"cb4-4\"><a href=\"#cb4-4\" aria-hidden=\"true\" tabindex=\"-1\"></a>        d <span class=\"op\">=</span> math.sqrt(math.<span class=\"bu\">pow</span>((x1<span class=\"op\">-</span>x2),<span class=\"dv\">2</span>)<span class=\"op\">+</span>math.<span class=\"bu\">pow</span>((y1<span class=\"op\">-</span>y2),<span class=\"dv\">2</span>))</span>\n<span id=\"cb4-5\"><a href=\"#cb4-5\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"cf\">return</span> d</span>\n<span id=\"cb4-6\"><a href=\"#cb4-6\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb4-7\"><a href=\"#cb4-7\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"co\"># 方式二</span></span>\n<span id=\"cb4-8\"><a href=\"#cb4-8\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"kw\">def</span> EuclideanDistance(<span class=\"va\">self</span>,instance1,instance2,length):</span>\n<span id=\"cb4-9\"><a href=\"#cb4-9\" aria-hidden=\"true\" tabindex=\"-1\"></a>        d <span class=\"op\">=</span><span class=\"dv\">0</span></span>\n<span id=\"cb4-10\"><a href=\"#cb4-10\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"cf\">for</span> x <span class=\"kw\">in</span> <span class=\"bu\">range</span>(length):</span>\n<span id=\"cb4-11\"><a href=\"#cb4-11\" aria-hidden=\"true\" tabindex=\"-1\"></a>            d <span class=\"op\">+=</span> <span class=\"bu\">pow</span>((instance1[x]<span class=\"op\">-</span>instance2[x]),<span class=\"dv\">2</span>)</span>\n<span id=\"cb4-12\"><a href=\"#cb4-12\" aria-hidden=\"true\" tabindex=\"-1\"></a>        <span class=\"cf\">return</span> math.sqrt(d)</span></code></pre></div>\n<hr>\n<h3 id=\"about-me\">About ME</h3>\n<h5 id=\"读书城南-在未来面前我们都是孩子\">👋 读书城南，🤔\n在未来面前，我们都是孩子～</h5>\n<ul>\n<li>📙\n一个热衷于探索学习新方向、新事物的智能产品经理，闲暇时间喜欢coding💻、画图🎨、音乐🎵、学习ing~</li>\n</ul>\n<h5 id=\"social-media\">👋 Social Media</h5>\n<ul>\n<li><p>🛠️ Blog: <a href=\"http://oceaneyes.top\">http://oceaneyes.top</a></p></li>\n<li><p>⚡ PM导航: <a href=\"https://pmhub.oceangzy.top\">https://pmhub.oceangzy.top</a></p></li>\n<li><p>☘️ CNBLOG: <a href=\"https://www.cnblogs.com/oceaneyes-gzy/\">https://www.cnblogs.com/oceaneyes-gzy/</a></p></li>\n<li><p>🌱 AI PRJ自己部署的一些算法demo: <a href=\"http://ai.oceangzy.top/\">http://ai.oceangzy.top/</a></p></li>\n<li><p>📫 Email: 1450136519@qq.com</p></li>\n<li><p>💬 WeChat: <a href=\"https://oceaneyes.top/img/wechatqrcode.jpg\">OCEANGZY</a></p></li>\n<li><p>💬 公众号: <a href=\"https://oceaneyes.top/img/wechatgzh.jpeg\">UncleJoker-GZY</a></p></li>\n</ul>\n<h5 id=\"加入小组\">👋 加入小组~</h5>\n<p><img src=\"https://oceaneyes.top/img/zhishigroup.jpg\" title=\"加入组织\" alt width=\"240\"></p>\n<h5 id=\"感谢打赏\">👋 感谢打赏~</h5>\n<p><img src=\"https://oceaneyes.top/img/alipay.jpg\" title=\"支付宝打赏\" alt width=\"140\">\n<img src=\"https://oceaneyes.top/img/wechatpay.jpg\" title=\"微信打赏\" alt width=\"140\"></p>\n","categories":[{"name":"Artificial Intelligence","path":"api/categories/Artificial Intelligence.json"},{"name":"Natural Language Processing","path":"api/categories/Natural Language Processing.json"}],"tags":[{"name":"Artificial Intelligence","path":"api/tags/Artificial Intelligence.json"},{"name":"Natural Language Processing","path":"api/tags/Natural Language Processing.json"}]}